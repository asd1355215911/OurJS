<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>dom</title>
<script src="../../dev.js"></script>
<script src="../../scripts/framework.js"></script>
<style>
fieldset { display: inline-block; width: 460px; margin: 0 5px 10px 0; *display: inline; }

.clone_event_test span { display: inline-block; height: 20px; padding: 0 5px; background: yellowgreen; font-size: 12px; line-height: 20px; text-align: center; vertical-align: bottom; cursor: default; }
.clone_test { color: white; }
textarea { width: 120px; resize: none; }

div.simples { float: left; width: 160px; height: 80px; background: gold; }
div.targets_container { float: right; }
div.targets { width: 160px; overflow: hidden; background: mediumseagreen; }
div.simple,
div.target { width: 150px; height: 20px; margin: 5px; line-height: 20px; text-align: center; }
div.simple { background: tomato; }
div.target { background: gainsboro; }
blockquote { margin: 120px 0 0; padding: 10px; border: 1px solid gainsboro; }
button { padding: 3px 5px; }
button samp { padding: 0 2px; border-radius: 3px; }
samp.target { background: mediumseagreen; }
samp.sample { background: tomato; }
samp.simples { background: gold; }
</style>
</head>
<body>
<div id="content">
  <h1>DOM 操作</h1>

  <h2>克隆元素</h2>

  <!-- clone { -->
  <fieldset style="width: 940px;">
    <legend>clone - 克隆元素。每次点击“clone”按钮，都将清除右侧区域（便于测试效果），并克隆左侧区域的内容到右侧区域内。</legend>
    <table style="table-layout: fixed; width: 940px;">
      <tr>
        <td style="width: 400px;">
          <!-- 克隆源 { -->
          <div id="c_sample">
            <!-- 注释也会被克隆 -->
            克隆的表单元素将以这些元素的默认状态为当前状态
            <div id="c_event" class="clone_event_test">
              <span>这些元素添加了事件监听器</span>
              <span>监听器也可以被克隆</span>
              <span>指向它们以测试</span>
            </div>
            <form style="border: 1px solid black; margin: 3px 0; padding: 5px; background: whitesmoke;" onsubmit="return false;">
              <select multiple style="float: left;">
                <option selected>option 1</option>
                <option selected>option 2</option>
                <option>option 3</option>
                <option disabled>option 4</option>
              </select>
              <input type="checkbox" checked>
              <input type="checkbox">
              <input type="checkbox" disabled>
              <input id="c_data" type="text" value="clone"><br>
              <input name="state" type="radio" checked>
              <input name="state" type="radio">
              <input name="state" type="radio" disabled>
              <input type="text" value="clone" disabled><br>
              <textarea>default text</textarea>
              <textarea disabled>default text</textarea><br>
              <p style="text-align: center;">
                <button type="submit">SUBMIT</button>
                <button type="reset">RESET</button>
              </p>
            </form>
          </div>
          <!-- } 克隆源 -->
        </td>
        <td style="text-align: center; vertical-align: middle; background-image: url(../../images/bg_comment.png);">
          <button id="clone" style="margin: auto; width: 100px; height: 100px;">» clone »</button>
        </td>
        <td id="c_target" style="width: 400px;">
          <!-- 克隆后的元素插入的位置 -->
          <var></var>
        </td>
      </tr>
    </table>
  </fieldset>
  <script>
  execute(function($) {
    $('#c_event')
        .on('mouseenter', function() {
          this.setStyle('color', 'maroon');
        })
        .on('mouseleave', function() {
          this.setStyle('color', '#333');
        })
        .on('mouseover:relay(span)', function() {
          this.setStyle('backgroundColor', 'orchid');
        })
        .on('mouseout:relay(span)', function() {
          this.setStyle('backgroundColor', 'yellowgreen');
        })
        .on('mouseover:relay(span)', function() {
          this.addClass('clone_test');
        })
        .on('mouseout:relay(span)', function() {
          this.removeClass('clone_test');
        });
    var $data = $('#c_data')
        .setData('value', 'data-value')
        .on('click', function() {
          this.value = this.getData('value') + ' (uid=' + this.uid + ')';
        });
    var $sample = $('#c_sample');
    var $target = $('#c_target');
    $('#clone').on('click', function() {
      $sample.clone(true, true).replace($target.getFirstChild());
    });
  });
  </script>
  <!-- } clone -->

  <h2>修改位置或内容</h2>

  <!-- insertTo { -->
  <fieldset>
    <legend>insertTo - 将本元素插入到目标元素的指定位置。</legend>
    <div class="simples">
      <div id="i_sample" class="simple">$sample</div>
    </div>
    <div class="targets_container">
      <div id="i_target" class="targets">
        <div class="target"></div>
        <div class="target"></div>
        <div class="target"></div>
      </div>
    </div>
    <blockquote id="i_controls">
      <button><code><samp class="sample">$sample</samp>.insertTo(<samp class="target">$target</samp>, 'before');</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.insertTo(<samp class="target">$target</samp>, 'top');</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.insertTo(<samp class="target">$target</samp>, 'bottom');</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.insertTo(<samp class="target">$target</samp>, 'after');</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.insertTo(<samp class="simples">$container</samp>);</code></button>
      <br>
    </blockquote>
  </fieldset>
  <script>
  execute(function($) {
    var $sample = $('#i_sample');
    var $target = $('#i_target');
    var $container = $sample.getParent();
    $('#i_controls').on('click:relay(button)', function() {
      eval(this.innerText);
    });
  });
  </script>
  <!-- } insertTo -->

  <br>

  <!-- swap { -->
  <fieldset>
    <legend>swap - 交换本元素目标元素的位置。</legend>
    <div class="simples">
      <div id="s_sample" class="simple">$sample</div>
    </div>
    <div class="targets_container">
      <div id="s_target" class="targets">
        <div class="target">$targetA</div>
        <div class="target">$targetB</div>
        <div class="target">$targetC</div>
      </div>
    </div>
    <blockquote id="s_controls">
      <button><code><samp class="sample">$sample</samp>.swap(<samp class="target">$targetA</samp>);</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.swap(<samp class="target">$targetB</samp>);</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.swap(<samp class="target">$targetC</samp>);</code></button>
      <br>
    </blockquote>
  </fieldset>
  <script>
  execute(function($) {
    window.$ = $;
    var $sample = $('#s_sample');
    var targets = $('#s_target').getChildren();
    var $targetA = targets[0];
    var $targetB = targets[1];
    var $targetC = targets[2];
    $('#s_controls').on('click:relay(button)', function() {
      eval(this.innerText);
    });
  });
  </script>
  <!-- } swap -->

  <!-- replace { -->
  <fieldset>
    <legend>replace - 使用本元素替换目标元素。</legend>
    <div class="simples">
      <div id="r_sample" class="simple">$sample</div>
    </div>
    <div class="targets_container">
      <div id="r_target" class="targets">
        <div class="target">$targetA</div>
        <div class="target">$targetB</div>
        <div class="target">$targetC</div>
      </div>
    </div>
    <blockquote id="r_controls">
      <button><code><samp class="sample">$sample</samp>.replace(<samp class="target">$targetA</samp>);</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.replace(<samp class="target">$targetB</samp>);</code></button>
      <br>
      <button><code><samp class="sample">$sample</samp>.replace(<samp class="target">$targetC</samp>);</code></button>
      <br>
    </blockquote>
  </fieldset>
  <script>
  execute(function($) {
    window.$ = $;
    var $sample = $('#r_sample');
    var targets = $('#r_target').getChildren();
    var $targetA = targets[0];
    var $targetB = targets[1];
    var $targetC = targets[2];
    $('#r_controls').on('click:relay(button)', function() {
      eval(this.innerText);
    });
  });
  </script>
  <!-- } replace -->

</div>
</body>
</html>
