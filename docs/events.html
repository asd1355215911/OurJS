<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>可用事件类型列表</title>
<script src="../our.js"></script>
<script src="../scripts/common_loader.js"></script>
<style>
pre,
samp { font-family: Verdana, Helvetica, Arial, "Microsoft YaHei", SimSun, sans-serif; }
samp,
var { font-style: italic; }
samp { color: gray; }
dfn { color: steelblue; }
var { color: sienna; }
table { table-layout: fixed; width: 800px; margin: 30px auto; }
col { width: 100px; }
col.type { width: auto; }
col.appliesto { width: 250px; }
tr:hover { background: aliceblue; }
td.satisfied { text-align: center; }
td.satisfied em { font-style: normal; font-weight: bold; }
td.satisfied em.true { color: forestgreen; }
td.satisfied em.false { color: silver; }
</style>
</head>
<body>
<div id="content">
<h1>可用事件类型列表</h1>

<p>以下列表中的事件类型均可以在其各自“应用于”的对象上调用 on、off 或 fire 方法时使用，如：</p>
<pre><samp>window</samp>.<dfn>fire</dfn>('<var><strong>resize</strong></var>);</pre>
<pre><samp>document</samp>.<dfn>off</dfn>('<var><strong>click</strong>.foo</var>');</pre>
<pre><samp>$element</samp>.<dfn>on</dfn>('<var><strong>mousedrag</strong>:relay(.draggable)</var>', function(e) {...});</pre>

<table>
  <colgroup>
    <col class="type">
    <col class="mouse">
    <col class="keyboard">
    <col class="bubbling">
    <col class="cancelable">
    <col class="appliesto">
  </colgroup>
  <thead>
    <tr>
      <th>事件类型</th>
      <th>鼠标事件</th>
      <th>键盘事件</th>
      <th>可以冒泡<br>(可以代理)</th>
      <th>可以阻止<br>默认行为</th>
      <th>应用于</th>
    </tr>
  </thead>
  <tbody id="list"></tbody>
</table>

<p>
  以上列表中列出的事件类型，除<var><strong>自定义事件类型</strong></var>外，均可能被用户的操作触发，也可能由 fire 方法触发。<br>
  <var><strong>自定义事件类型</strong></var>则无法被用户的操作触发，只能通过 fire 方法触发<sup>1</sup>。
</p>
<ol class="comment">
  <li>
    对于不是所有的浏览器都支持的事件类型（如 beforeactivate 事件），OurJS 在使用 on 方法添加监听器的时候，也会将其视为<var><strong>自定义事件类型</strong></var>，并不会真正在文档中监听此类型的 DOM 事件。因此即便在支持此类型事件的浏览器中，此事件也不会被用户的操作触发。这样设计是为了确保事件监听行为在各浏览器中的一致性。<br>
    如果必须使用上述事件类型来实现某些功能，则不应使用 OurJS 提供的 on 方法来添加监听器，开发者应自行处理可能出现的兼容性问题。
  </li>
</ol>

<p>以下事件类型的一些细节行为仍不能兼容所有浏览器：</p>
<ul>
  <li>
    contextmenu
    <p class="comment">IE8 只要添加了该类事件的监听器，即自动取消默认行为。</p>
  </li>
  <li>
    keydown & keypress
    <p class="comment">大部分浏览器都禁止取消特殊按键（如 F5 和 Backspace 等）的默认行为。</p>
  </li>
  <li>
    error
    <p class="comment">
      IE6 IE7 IE8 在 window 上添加的原生监听器会传入三个参数 message、url 和 lineNumber，而其他浏览器则只会传入一个参数 event。鉴于极少监听此类型的事件，OurJS 未做修复。<br>
      必须要监听时，可以使用内联事件监听器，这种监听器在目前所有浏览器下均与上述 IE6 IE7 IE8 的行为一致。
    </p>
  </li>
  <li>
    unload & beforeunload
    <p class="comment">
      Opera 不支持这两个事件。
    </p>
  </li>
</ul>

<script>
//--------------------------------------------------[Data]
var events = [
  ['mousedown', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mouseup', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['click', 1, 0, 1, 1, '<dfn>document</dfn>, <var>Element</var>'],
  ['dblclick', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['contextmenu', 1, 0, 1, 1, '<dfn>document</dfn>, <var>Element</var>'],
  ['mousemove', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mouseover', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mouseout', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mouseenter', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mouseleave', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mousewheel', 1, 0, 1, 1, '<dfn>document</dfn>, <var>Element</var>'],
  ['mousedragstart', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mousedrag', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['mousedragend', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
//  ['mousedragenter', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
//  ['mousedragover', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
//  ['mousedragleave', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
//  ['mousedrop', 1, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['keydown', 0, 1, 1, 1, '<dfn>document</dfn>, <var>Element</var>'],
  ['keypress', 0, 1, 1, 1, '<dfn>document</dfn>, <var>Element</var>'],
  ['keyup', 0, 1, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['focus', 0, 0, 0, 0, '<dfn>window</dfn>, <var>Element</var>'],
  ['blur', 0, 0, 0, 0, '<dfn>window</dfn>, <var>Element</var>'],
  ['focusin', 0, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['focusout', 0, 0, 1, 0, '<dfn>document</dfn>, <var>Element</var>'],
  ['input', 0, 0, 1, 0, '<dfn>window</dfn>, <dfn>document</dfn>, <var>Element</var>'],
  ['change', 0, 0, 1, 0, '<dfn>window</dfn>, <dfn>document</dfn>, <var>Element</var>'],
  ['select', 0, 0, 0, 0, '<dfn>INPUT[type=text|password]</dfn>, <dfn>TEXTAREA</dfn>'],
  ['submit', 0, 0, 0, 1, '<dfn>FORM</dfn>'],
  ['reset', 0, 0, 0, 1, '<dfn>FORM</dfn>'],
  ['scroll', 0, 0, 0, 0, '<dfn>window</dfn>, <var>Element</var>'],
  ['resize', 0, 0, 0, 0, '<dfn>window</dfn>'],
  ['load', 0, 0, 0, 0, '<dfn>window</dfn>, <dfn>IFRAME</dfn>, <dfn>IMG</dfn>'],
  ['unload', 0, 0, 0, 0, '<dfn>window</dfn>'],
  ['error', 0, 0, 0, 0, '<dfn>IMG</dfn>'],
  ['beforeunload', 0, 0, 0, 0, '<dfn>window</dfn>'],
  ['beforedomready', 0, 0, 0, 0, '<dfn>document</dfn>'],
  ['domready', 0, 0, 0, 0, '<dfn>document</dfn>'],
  ['afterdomready', 0, 0, 0, 0, '<dfn>document</dfn>']
];

//--------------------------------------------------[List]
(function() {
  var $tbody = $('#list');
  var $tr;
  var $td;
  var showResult = function(data) {
    $tr = $tbody.insertRow(-1);
    for (var i = 0; i < 6; i++) {
      $td = $tr.insertCell(-1);
      if (i > 0 && i < 5) {
        $td.className = 'satisfied';
        $td.innerHTML = data[i] ? '<em class="true">是</em>' : '<em class="false">否</em>';
      } else {
        $td.innerHTML = data[i];
      }
    }
  };

  var eventsObject = {};
  events.forEach(function(item) {
    var type = item[0];
    eventsObject[type] = parseInt(('' + item[3] + item[2] + item[1]), 2);
    // 内部使用的事件类型。
    if (type !== 'beforedomready' && type !== 'afterdomready') {
      showResult(item);
    }
  });
  // 自定义事件类型。
  showResult(['<var><strong>自定义事件类型</strong></var>', 0, 0, 1, 0, '<dfn>window</dfn>, <dfn>document</dfn>, <var>Element</var>']);

  console.log(JSON.stringify(eventsObject));

})();
</script>

</div>
</body>
</html>
